1. Инсталация на дипломния проект от GitHub и необходими
библиотеки
Преди да изтеглите проекта от GitHub изпълнете следните команди:
# sudo apt-get update
# sudo apt-get upgrade
# sudo apt-get autoremove
# sudo reboot
И изтеглете тези компоненти:
# sudo apt-get install python-serial
# sudo apt-get install bluetooth bluez-utils blueman
# sudo apt-get install python-wxgtk2.8 python-wxtools wx2.8-i18n
libwxgtk2.8-dev
# sudo apt-get install git-core
# sudo reboot
След изпълнение на тези команди, отново в конзолата копирайте
тези команди:
# cd ~
# https://github.com/georgisabev/OBD2-Black-Box.git
Или изтеглете проекта като архив от сайта на GitHub

2. Настройка за стартиране на shellscript при захранване на Raspberry

#!/bin/bash
# Пътят към папката с проекта
file_path="/път/към/ваш/pyobd-master-black-box/pyobd"
# Проверка дали файла съществува
if [ -f "$file_path" ]; then
# Стартиране на файла
/usr/bin/python3 "$file_path" &
echo "success"
else
echo "fail"
fi
Отворете текстов редактор на своето Raspberry Pi3. копирайте
горния скрипт и запазете файла с име, като например
“start_on_boot.sh”.
След запазването на файла той трябва да изпълним с
командата:
chmod +x start_on_boot.sh
Сега трябва да добавите скрипта към списъка със стартиращи
се при захранване приложения. За да го направите, отворете
файла /etc/rc.local в конзолата:
sudo nano /etc/rc.local
На последния ред преди ‘exit 0’ добавете пътя до shellscript.
/път/към/вашия/скрипт/start_on_boot.sh
Затворете и запазете файла
3. Работа с BlueZ
BlueZ е официалната имплементация на Bluetooth протокола за
Linux. Това е софтуерна библиотека, която предоставя инструменти
и интерфейси за работа с Bluetooth устройства в Linux среда. BlueZ
позволява на Linux системите да комуникират с Bluetooth устройства
като слушалки, мишки, клавиатури, смартфони и други, в конкретния
случай с ELM327 модула, като предоставя набор от инструменти за
управление на Bluetooth функционалността.
С цел да го използваме трябва да го инсталираме, което правим с
# sudo apt-get install bluetooth bluez-utils blueman
След това, за да го стартираме всеки път когато започва нова сесия
на записване на информация от автомобила трябва да го добавим с
shellscript от точка 2.
#!/bin/bash
# Проверка дали BlueZ е инсталирано
if ! dpkg -s bluez &> /dev/null; then
echo "BlueZ is not installed. Install with 'sudo
apt-get install bluez'"
exit 1
fi
# Пътят към файла, който искате да стартирате
file_path="/път/към/ваш/pyobd-master-black-box/pyobd"
# Проверка дали файла съществува
if [ -f "$file_path" ]; then
# Стартиране на файла
/usr/bin/python3 "$file_path" &
echo "success"
else
echo "fail"
fi
Отново записваме файла и изпълняваме командите след него описани по-горе
4. Инсталация на проекта в автомобила
След изпълняване на предишните стъпки следва проектът да
бъде инсталиран в автомобила.
- С вече конфигурираното и Raspberry Pi3 премахнете всичко освен SD картата и DS3231 модула.
- Локализирайте 12V изход в автомобила си
- Локализирайте ОБД2 шината на автомобила. Обикновено тя
се намира под волана на автомобила
- Вкарайте ELM327 модула в ОБД2 порта
- Захранете с адаптера и кабела от точка 4.1. своето Raspberry
Pi.
- Добавете флашката към USB порт на Raspberry Pi
Инсталацията на проекта е завършена. Дипломната работа записва
в .csv файлове информацията от автомобила. След всяко едно
шофиране можете да вземете флашката и да разгледате и
използвате записаните на нея данни.
